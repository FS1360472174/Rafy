<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-zh-CN.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>领域驱动设计</title><meta name="Language" content="zh-cn" /><meta name="Microsoft.Help.Id" content="853673c9-7c40-4679-b139-a3e7e3cec8ef" /><meta name="Description" content="为了实现对复杂业务逻辑的处理，框架基于领域驱动设计（Domain Driven Design，DDD）的思想来构建。" /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Rafy User Guide<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="69b641cf-d1fe-4f06-877f-b479d268a3fc.htm" title="Rafy User Guide" tocid="roottoc">Rafy User Guide</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="69b641cf-d1fe-4f06-877f-b479d268a3fc.htm" title="Rafy框架" tocid="69b641cf-d1fe-4f06-877f-b479d268a3fc">Rafy框架</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="3ebafad8-73e3-431f-9e49-9a0d9b23c786.htm" title="设计理念" tocid="3ebafad8-73e3-431f-9e49-9a0d9b23c786">设计理念</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="853673c9-7c40-4679-b139-a3e7e3cec8ef.htm" title="领域驱动设计" tocid="853673c9-7c40-4679-b139-a3e7e3cec8ef">领域驱动设计</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="e1014057-fd62-4810-8f1f-333d54564e91.htm" title="面向服务架构" tocid="e1014057-fd62-4810-8f1f-333d54564e91">面向服务架构</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="15c790a6-8f5e-44aa-b8c3-74a955004a1e.htm" title="插件化架构" tocid="15c790a6-8f5e-44aa-b8c3-74a955004a1e">插件化架构</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="813981b5-3631-4d47-84ee-314aed1346ff.htm" title="模型驱动架构" tocid="813981b5-3631-4d47-84ee-314aed1346ff">模型驱动架构</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="946c540b-acb0-4531-b99c-85756cb69d4e.htm" title="产品线工程" tocid="946c540b-acb0-4531-b99c-85756cb69d4e">产品线工程</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="点击或拖拽改变大小" title="点击或拖拽改变大小" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="点击或拖拽改变大小" title="点击或拖拽改变大小" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>领域驱动设计</h1></td></tr></table><span class="introStyle"></span> <div class="introduction"><p>为了实现对复杂业务逻辑的处理，框架基于领域驱动设计（Domain Driven Design，DDD）的思想来构建。</p><p>本页包含以下内容：</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#rafyDDD">领域实体驱动</a></li><li class="outlineSectionEntry"><a href="#dddArch">开发架构</a></li><li class="outlineSectionEntry"><a href="#ddd">附 - 领域驱动设计</a></li></ul></div><div class="collapsibleAreaRegion" id="rafyDDD"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />领域实体驱动</span></div><div id="ID0RBSection" class="collapsibleSection"><p>框架中的领域实体是“富模型”，相对贫血模型而言，它不但有属性，而且还有关系，以及维护整个组合实体的行为。</p><p>
                    领域实体设计是整个系统设计的源头；基于实体，设计出相应的领域服务；然后再生成数据库；再生成界面。就可以快速地开发出完整的系统。关于领域实体的详情，见：<a href="e9998e68-31e8-47d6-9e28-829aade5044e.htm">领域实体</a>。
                </p><p>开始领域实体编码前，需要先设计领域模型的 UML 关系图（类图）、领域服务的流程图（序列图）。然后再把 UML 图一对一转换为领域实体。以下是使用 EnterpriseArchitect(EA) 为某项目绘制的领域模型图：</p><div class="mediaNear"><div class="caption">EA 中的领域模型 UML 图</div><img alt="DDD UMLSource" src="../media/DDD_UMLSource.png" /></div><p>上图中的所有关系，都可以直接转换为领域实体。转换后，也可以直接在 VisualStudio 中查询相关实体的模型图，如：</p><div class="mediaNear"><div class="caption">VisualStudio 中的领域模型 UML 图</div><img alt="DDD UMLSource VS" src="../media/DDD_UMLSource_VS.png" /></div><p>
                    关于如何使用 Visual Studio 中的 Rafy 领域模型图，见：<a href="640ac9bb-0090-4b38-9763-bad4fca3adfb.htm">领域实体关系图</a>。
                </p><p>
                    但是，Rafy 并没有完全按照经典 DDD 的概念来搭建。关于 Rafy 与经典 DDD 的关系，见：<a href="f4f5c2f5-638a-456a-9c8d-1e1854c63002.htm">Rafy 与经典 DDD 的关系</a>。
                </p></div><div class="collapsibleAreaRegion" id="dddArch"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />开发架构</span></div><div id="ID1RBSection" class="collapsibleSection"><p>Rafy 中的开发架构采用了洋葱架构思想：</p><div class="mediaNear"><div class="caption">洋葱架构</div><img alt="DDD Onion Architecture" src="../media/DDD_OnionArchitecture.png" /></div><p>
                    关于此架构的详情，见：<a href="http://jeffreypalermo.com/blog/the-onion-architecture-part-1/" target="_blank">The Onion Architecture</a>。
                </p></div><div class="collapsibleAreaRegion" id="ddd"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />附 - 领域驱动设计</span></div><div id="ID2RBSection" class="collapsibleSection"><p /><div class="mediaNear"><div class="caption">DDD 组成部分</div><img alt="DDD Components" src="../media/DDD_Components.png" /></div><div class="mediaNear"><div class="caption">DDD 分层架构图</div><img alt="DDD Layer 2" src="../media/DDD_Layer2.png" /></div><p>
                    关于 DDD 的详细概念，见 Eric Evans 的：《<a href="http://book.douban.com/subject/1418618/" target="_blank">Domain-Driven Design</a> 》。
                </p></div></div></div><div id="pageFooter" class="pageFooter">有问题请联系 9474649@qq.com。<div class="feedbackLink">有关这个主题的评论请发邮件到
        <a id="HT_MailLink" href="mailto:9474649%40qq.com?Subject=Rafy User Guide">发送反馈</a></div>
        <script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>